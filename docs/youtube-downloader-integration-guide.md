# HomeSystem YouTubeè§†é¢‘ä¸‹è½½å·¥å…·é›†æˆæŒ‡å—

HomeSystemç°å·²æ”¯æŒYouTubeç­‰å¤šå¹³å°è§†é¢‘ä¸‹è½½åŠŸèƒ½ï¼Œä¸“ä¸ºè®ºæ–‡ç ”ç©¶ä¸­çš„è§†é¢‘èµ„æºæ”¶é›†å’Œç®¡ç†è€Œè®¾è®¡ã€‚

## ğŸ“‹ ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [APIå‚è€ƒ](#apiå‚è€ƒ)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
- [é…ç½®é€‰é¡¹](#é…ç½®é€‰é¡¹)
- [å®‰å…¨ç‰¹æ€§](#å®‰å…¨ç‰¹æ€§)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å¹³å°æ”¯æŒ](#å¹³å°æ”¯æŒ)

## æ¦‚è¿°

YouTubeDownloaderToolæ˜¯åŸºäºyt-dlpåº“å®ç°çš„å¤šåŠŸèƒ½è§†é¢‘ä¸‹è½½å·¥å…·ï¼Œå®Œå…¨é›†æˆåˆ°HomeSystemçš„LangGraphä»£ç†ç³»ç»Ÿä¸­ã€‚è¯¥å·¥å…·ç‰¹åˆ«é’ˆå¯¹å­¦æœ¯ç ”ç©¶åœºæ™¯è¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ”¯æŒè®ºæ–‡ç›¸å…³è§†é¢‘èµ„æºçš„è‡ªåŠ¨åŒ–æ”¶é›†å’Œç®¡ç†ã€‚

### æ ¸å¿ƒä¼˜åŠ¿

- ğŸ¯ **å¤šå¹³å°æ”¯æŒ**ï¼šYouTubeã€Bilibiliã€Vimeoã€Dailymotionç­‰
- ğŸ·ï¸ **æ™ºèƒ½å‘½å**ï¼šæ”¯æŒå¤§æ¨¡å‹ç¡®å®šæ–‡ä»¶åï¼Œè‡ªåŠ¨æ¸…ç†ä¸å®‰å…¨å­—ç¬¦
- âš™ï¸ **çµæ´»é…ç½®**ï¼šè´¨é‡ã€æ ¼å¼ã€å¤§å°é™åˆ¶ç­‰å¤šç»´åº¦æ§åˆ¶
- ğŸ”’ **å®‰å…¨å¯é **ï¼šè¾“å…¥éªŒè¯ã€å¹³å°æ£€æŸ¥ã€ç£ç›˜ç©ºé—´ç®¡ç†
- ğŸ”„ **æ— ç¼é›†æˆ**ï¼šå®Œå…¨å…¼å®¹LangChainå·¥å…·ç”Ÿæ€ç³»ç»Ÿ

## åŠŸèƒ½ç‰¹æ€§

### ä¸‹è½½åŠŸèƒ½
- **å¤šæ ¼å¼æ”¯æŒ**ï¼šMP4ã€WEBMã€MKVã€AVIç­‰
- **è´¨é‡æ§åˆ¶**ï¼šæ”¯æŒbest/worst/720p/1080pç­‰è®¾ç½®
- **éŸ³é¢‘æå–**ï¼šæ”¯æŒçº¯éŸ³é¢‘ä¸‹è½½æ¨¡å¼ï¼ˆMP3æ ¼å¼ï¼‰
- **æ–‡ä»¶å¤§å°é™åˆ¶**ï¼šé˜²æ­¢ä¸‹è½½è¿‡å¤§æ–‡ä»¶

### æ™ºèƒ½ç‰¹æ€§
- **è‡ªåŠ¨æ–‡ä»¶å‘½å**ï¼šåŸºäºè§†é¢‘æ ‡é¢˜å’Œç”¨æˆ·æŒ‡å®šåç§°
- **é‡å¤æ£€æµ‹**ï¼šé¿å…é‡å¤ä¸‹è½½ç›¸åŒå†…å®¹
- **è¿›åº¦è·Ÿè¸ª**ï¼šå®æ—¶æ˜¾ç¤ºä¸‹è½½è¿›åº¦å’ŒçŠ¶æ€
- **é”™è¯¯æ¢å¤**ï¼šæ™ºèƒ½é‡è¯•å’Œé”™è¯¯å¤„ç†æœºåˆ¶

### å®‰å…¨ç‰¹æ€§
- **URLéªŒè¯**ï¼šæ£€æŸ¥URLæ ¼å¼å’Œæœ‰æ•ˆæ€§
- **å¹³å°ç™½åå•**ï¼šä»…æ”¯æŒå·²éªŒè¯çš„è§†é¢‘å¹³å°
- **æ–‡ä»¶åæ¸…ç†**ï¼šè‡ªåŠ¨æ¸…ç†ä¸å®‰å…¨å­—ç¬¦
- **ç£ç›˜ç©ºé—´æ£€æŸ¥**ï¼šä¸‹è½½å‰æ£€æŸ¥å¯ç”¨ç©ºé—´

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install "yt-dlp[default]>=2024.12.0"
```

### 2. åŸºæœ¬ä½¿ç”¨

```python
from HomeSystem.graph.tool import create_youtube_downloader_tool

# åˆ›å»ºä¸‹è½½å·¥å…·
downloader = create_youtube_downloader_tool("/path/to/download/directory")

# ä¸‹è½½è§†é¢‘
result = downloader.invoke({
    "url": "https://www.youtube.com/watch?v=example",
    "filename": "research_video",
    "quality": "720p",
    "format_preference": "mp4"
})

print(result)
```

### 3. åœ¨LangGraphä¸­ä½¿ç”¨

```python
from HomeSystem.graph.tool import create_youtube_downloader_tool
from langgraph.graph import StateGraph

# åˆ›å»ºå·¥å…·
tools = [create_youtube_downloader_tool("./downloads")]

# æ·»åŠ åˆ°å›¾ä¸­
graph = StateGraph(state_schema)
graph.add_node("download", tools[0])
```

## APIå‚è€ƒ

### YouTubeDownloaderTool

ä¸»è¦çš„è§†é¢‘ä¸‹è½½å·¥å…·ç±»ã€‚

#### æ„é€ å‡½æ•°

```python
YouTubeDownloaderTool(download_dir: str, **kwargs)
```

**å‚æ•°ï¼š**
- `download_dir` (str): ä¸‹è½½ç›®å½•è·¯å¾„ï¼Œå·¥å…·åˆå§‹åŒ–æ—¶åˆ›å»º

#### è¾“å…¥æ¨¡å‹ - YouTubeDownloaderInput

```python
class YouTubeDownloaderInput(BaseModel):
    url: str  # è§†é¢‘URLï¼ˆå¿…éœ€ï¼‰
    filename: Optional[str] = None  # è‡ªå®šä¹‰æ–‡ä»¶å
    format_preference: str = "mp4"  # é¦–é€‰æ ¼å¼
    quality: str = "best"  # è§†é¢‘è´¨é‡
    audio_only: bool = False  # æ˜¯å¦åªä¸‹è½½éŸ³é¢‘
    max_filesize: Optional[str] = "500M"  # æœ€å¤§æ–‡ä»¶å¤§å°
```

#### ä¸»è¦æ–¹æ³•

##### invoke(input_dict) -> str

æ‰§è¡Œè§†é¢‘ä¸‹è½½æ“ä½œã€‚

**å‚æ•°ï¼š**
- `input_dict` (dict): åŒ…å«ä¸‹è½½å‚æ•°çš„å­—å…¸

**è¿”å›å€¼ï¼š**
- `str`: ä¸‹è½½ç»“æœä¿¡æ¯

##### _is_supported_platform(url) -> bool

æ£€æŸ¥URLæ˜¯å¦å±äºæ”¯æŒçš„å¹³å°ã€‚

**å‚æ•°ï¼š**
- `url` (str): è§†é¢‘URL

**è¿”å›å€¼ï¼š**
- `bool`: æ˜¯å¦æ”¯æŒè¯¥å¹³å°

### å·¥å‚å‡½æ•°

#### create_youtube_downloader_tool(download_dir) -> YouTubeDownloaderTool

åˆ›å»ºYouTubeä¸‹è½½å·¥å…·å®ä¾‹çš„ä¾¿æ·å‡½æ•°ã€‚

**å‚æ•°ï¼š**
- `download_dir` (str): ä¸‹è½½ç›®å½•è·¯å¾„

**è¿”å›å€¼ï¼š**
- `YouTubeDownloaderTool`: é…ç½®å¥½çš„å·¥å…·å®ä¾‹

## ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬è§†é¢‘ä¸‹è½½

```python
from HomeSystem.graph.tool import create_youtube_downloader_tool

downloader = create_youtube_downloader_tool("./research_videos")

result = downloader.invoke({
    "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
    "filename": "demo_video",
    "quality": "720p",
    "format_preference": "mp4",
    "max_filesize": "100M"
})

print(result)
```

### éŸ³é¢‘æå–

```python
# æå–éŸ³é¢‘ç”¨äºæ’­å®¢æˆ–è®²åº§
result = downloader.invoke({
    "url": "https://www.youtube.com/watch?v=lecture_id",
    "filename": "machine_learning_lecture",
    "audio_only": True,
    "max_filesize": "50M"
})
```

### æ‰¹é‡ä¸‹è½½

```python
video_list = [
    {
        "url": "https://www.youtube.com/watch?v=vid1",
        "filename": "intro_to_ai",
        "quality": "1080p"
    },
    {
        "url": "https://www.youtube.com/watch?v=vid2", 
        "filename": "deep_learning_basics",
        "quality": "720p"
    }
]

for video in video_list:
    try:
        result = downloader.invoke(video)
        print(f"âœ“ æˆåŠŸ: {video['filename']}")
    except Exception as e:
        print(f"âœ— å¤±è´¥: {video['filename']} - {e}")
```

### ä¸è®ºæ–‡åˆ†æå·¥ä½œæµé›†æˆ

```python
# æ¨¡æ‹Ÿè®ºæ–‡åˆ†æå‘ç°çš„è§†é¢‘èµ„æº
paper_videos = [
    "https://www.youtube.com/watch?v=cnn_explanation",
    "https://www.youtube.com/watch?v=transformer_demo"
]

# ä¸ºç‰¹å®šè®ºæ–‡åˆ›å»ºç›®å½•
paper_title = "attention_is_all_you_need"
video_dir = f"./research/{paper_title}/videos"

downloader = create_youtube_downloader_tool(video_dir)

for i, url in enumerate(paper_videos, 1):
    result = downloader.invoke({
        "url": url,
        "filename": f"{paper_title}_supplement_{i:02d}",
        "quality": "best",
        "format_preference": "mp4"
    })
```

## é…ç½®é€‰é¡¹

### è§†é¢‘è´¨é‡è®¾ç½®

| é€‰é¡¹ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `best` | æœ€ä½³å¯ç”¨è´¨é‡ | é‡è¦ç ”ç©¶è§†é¢‘ |
| `worst` | æœ€ä½è´¨é‡ | å¿«é€Ÿé¢„è§ˆ |
| `1080p` | 1080pé«˜æ¸… | è¯¦ç»†åˆ†æ |
| `720p` | 720pæ ‡æ¸… | ä¸€èˆ¬ç”¨é€” |
| `480p` | 480pä½æ¸… | ç½‘ç»œå—é™ç¯å¢ƒ |

### æ ¼å¼åå¥½

| æ ¼å¼ | ä¼˜åŠ¿ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `mp4` | å…¼å®¹æ€§æœ€å¥½ | é€šç”¨æ’­æ”¾ |
| `webm` | æ–‡ä»¶è¾ƒå° | å­˜å‚¨å—é™ |
| `mkv` | è´¨é‡æœ€é«˜ | ä¸“ä¸šåˆ†æ |

### æ–‡ä»¶å¤§å°é™åˆ¶

```python
# ä¸åŒåœºæ™¯çš„å¤§å°é™åˆ¶å»ºè®®
size_limits = {
    "quick_preview": "50M",     # å¿«é€Ÿé¢„è§ˆ
    "standard_video": "200M",   # æ ‡å‡†è§†é¢‘
    "high_quality": "500M",     # é«˜è´¨é‡è§†é¢‘
    "research_archive": "1G"    # ç ”ç©¶å­˜æ¡£
}
```

## å®‰å…¨ç‰¹æ€§

### è¾“å…¥éªŒè¯

å·¥å…·ä¼šè‡ªåŠ¨éªŒè¯å’Œæ¸…ç†ï¼š
- **URLæ ¼å¼**ï¼šæ£€æŸ¥URLçš„æœ‰æ•ˆæ€§å’Œå®‰å…¨æ€§
- **æ–‡ä»¶åå®‰å…¨**ï¼šæ¸…ç†ç‰¹æ®Šå­—ç¬¦ï¼Œé˜²æ­¢è·¯å¾„æ³¨å…¥
- **å‚æ•°åˆæ³•æ€§**ï¼šéªŒè¯è´¨é‡ã€æ ¼å¼ç­‰å‚æ•°çš„æœ‰æ•ˆæ€§

### å¹³å°é™åˆ¶

ç›®å‰æ”¯æŒçš„å¹³å°ï¼š
- âœ… YouTube (youtube.com, youtu.be)
- âœ… Bilibili (bilibili.com)
- âœ… Vimeo (vimeo.com)
- âœ… Dailymotion (dailymotion.com)
- âœ… Twitch (twitch.tv)
- âœ… TikTok (tiktok.com)

### èµ„æºä¿æŠ¤

- **ç£ç›˜ç©ºé—´æ£€æŸ¥**ï¼šä¸‹è½½å‰æ£€æŸ¥å¯ç”¨ç©ºé—´ï¼ˆé»˜è®¤1GBé˜ˆå€¼ï¼‰
- **æ–‡ä»¶å¤§å°é™åˆ¶**ï¼šé˜²æ­¢ä¸‹è½½è¿‡å¤§æ–‡ä»¶å ç”¨å­˜å‚¨
- **è¶…æ—¶æ§åˆ¶**ï¼šé˜²æ­¢é•¿æ—¶é—´å ç”¨ç³»ç»Ÿèµ„æº

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ä¸‹è½½å¤±è´¥

**ç—‡çŠ¶**ï¼šä¸‹è½½è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯
```
ä¸‹è½½å¤±è´¥: ERROR: Video unavailable
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥è§†é¢‘URLæ˜¯å¦æœ‰æ•ˆ
- ç¡®è®¤è§†é¢‘æœªè¢«åˆ é™¤æˆ–è®¾ä¸ºç§æœ‰
- éªŒè¯ç½‘ç»œè¿æ¥çŠ¶æ€
- å°è¯•ä½¿ç”¨ä¸åŒçš„è´¨é‡è®¾ç½®

#### 2. ä¸æ”¯æŒçš„å¹³å°

**ç—‡çŠ¶**ï¼šå¹³å°æ£€æŸ¥å¤±è´¥
```
è­¦å‘Š: å¹³å°å¯èƒ½ä¸å—æ”¯æŒï¼Œä½†å°†å°è¯•ä¸‹è½½
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥URLæ˜¯å¦å±äºæ”¯æŒçš„å¹³å°åˆ—è¡¨
- å¦‚éœ€æ”¯æŒæ–°å¹³å°ï¼Œå¯è”ç³»å¼€å‘å›¢é˜Ÿ

#### 3. ç£ç›˜ç©ºé—´ä¸è¶³

**ç—‡çŠ¶**ï¼šç©ºé—´æ£€æŸ¥å¤±è´¥
```
é”™è¯¯: ç£ç›˜ç©ºé—´ä¸è¶³ï¼Œæ— æ³•ä¸‹è½½
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ¸…ç†ä¸‹è½½ç›®å½•ä¸­çš„æ—§æ–‡ä»¶
- é€‰æ‹©å…¶ä»–æœ‰è¶³å¤Ÿç©ºé—´çš„ç›®å½•
- è®¾ç½®æ›´å°çš„æ–‡ä»¶å¤§å°é™åˆ¶

#### 4. æ–‡ä»¶åé—®é¢˜

**ç—‡çŠ¶**ï¼šæ–‡ä»¶ååŒ…å«ç‰¹æ®Šå­—ç¬¦
```
æ–‡ä»¶åè¢«æ¸…ç†ä¸º: video___title_cleaned
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- è¿™æ˜¯æ­£å¸¸çš„å®‰å…¨æ¸…ç†è¡Œä¸º
- å¦‚éœ€ç‰¹å®šæ–‡ä»¶åï¼Œè¯·åœ¨filenameå‚æ•°ä¸­æŒ‡å®š

### è°ƒè¯•æŠ€å·§

#### å¯ç”¨è¯¦ç»†æ—¥å¿—

```python
import logging

# è®¾ç½®æ—¥å¿—çº§åˆ«
logging.getLogger("HomeSystem.graph.tool.youtube_downloader").setLevel(logging.DEBUG)

# æˆ–ä½¿ç”¨loguru
from loguru import logger
logger.add("download.log", level="DEBUG")
```

#### æµ‹è¯•å·¥å…·è¿æ¥

```python
from HomeSystem.graph.tool import create_youtube_downloader_tool

# åˆ›å»ºæµ‹è¯•å·¥å…·
downloader = create_youtube_downloader_tool("/tmp/test")

# æµ‹è¯•å¹³å°æ”¯æŒ
test_urls = [
    "https://www.youtube.com/watch?v=test",
    "https://your-target-url.com"
]

for url in test_urls:
    supported = downloader._is_supported_platform(url)
    print(f"{url}: {'æ”¯æŒ' if supported else 'ä¸æ”¯æŒ'}")
```

## æœ€ä½³å®è·µ

### 1. ç›®å½•ç®¡ç†

```python
# æŒ‰ç ”ç©¶ä¸»é¢˜ç»„ç»‡
research_structure = {
    "computer_vision": "./research/cv/videos",
    "nlp": "./research/nlp/videos", 
    "robotics": "./research/robotics/videos"
}

# æŒ‰è®ºæ–‡ç»„ç»‡
paper_videos = f"./research/papers/{paper_id}/supplementary_videos"
```

### 2. è´¨é‡é€‰æ‹©ç­–ç•¥

```python
# æ ¹æ®ç”¨é€”é€‰æ‹©è´¨é‡
quality_strategy = {
    "quick_review": "480p",      # å¿«é€Ÿæµè§ˆ
    "detailed_analysis": "720p", # è¯¦ç»†åˆ†æ
    "presentation": "1080p",     # æ¼”ç¤ºç”¨é€”
    "archive": "best"           # é•¿æœŸå­˜æ¡£
}
```

### 3. æ‰¹é‡å¤„ç†ä¼˜åŒ–

```python
import time
from pathlib import Path

def batch_download_with_retry(downloader, video_list, max_retries=3):
    """æ‰¹é‡ä¸‹è½½withé‡è¯•æœºåˆ¶"""
    
    results = []
    
    for video in video_list:
        retry_count = 0
        success = False
        
        while retry_count < max_retries and not success:
            try:
                result = downloader.invoke(video)
                results.append({"video": video, "status": "success", "result": result})
                success = True
                
            except Exception as e:
                retry_count += 1
                if retry_count < max_retries:
                    print(f"é‡è¯• {retry_count}/{max_retries}: {video.get('filename', 'unknown')}")
                    time.sleep(5)  # ç­‰å¾…5ç§’åé‡è¯•
                else:
                    results.append({"video": video, "status": "failed", "error": str(e)})
    
    return results
```

### 4. å­˜å‚¨ç©ºé—´ç®¡ç†

```python
def manage_storage(download_dir, max_size_gb=10):
    """ç®¡ç†ä¸‹è½½ç›®å½•çš„å­˜å‚¨ç©ºé—´"""
    
    download_path = Path(download_dir)
    
    # è®¡ç®—å½“å‰ä½¿ç”¨ç©ºé—´
    total_size = sum(f.stat().st_size for f in download_path.rglob('*') if f.is_file())
    total_size_gb = total_size / (1024**3)
    
    if total_size_gb > max_size_gb:
        # åˆ é™¤æœ€æ—§çš„æ–‡ä»¶
        files = sorted(download_path.rglob('*'), key=lambda x: x.stat().st_mtime)
        
        for old_file in files:
            if old_file.is_file():
                old_file.unlink()
                total_size_gb -= old_file.stat().st_size / (1024**3)
                
                if total_size_gb <= max_size_gb * 0.8:  # ä¿ç•™20%ç¼“å†²
                    break
```

### 5. ä¸AIä»£ç†é›†æˆ

```python
from HomeSystem.graph.tool import create_youtube_downloader_tool
from langchain.agents import create_openai_tools_agent

# åˆ›å»ºåŒ…å«ä¸‹è½½åŠŸèƒ½çš„ä»£ç†
tools = [
    create_youtube_downloader_tool("./research_downloads"),
    # å…¶ä»–å·¥å…·...
]

agent = create_openai_tools_agent(
    llm=your_llm,
    tools=tools,
    prompt="""ä½ æ˜¯ä¸€ä¸ªç ”ç©¶åŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©ä¸‹è½½å’Œåˆ†æè§†é¢‘èµ„æºã€‚
    å½“ç”¨æˆ·æåˆ°éœ€è¦è§†é¢‘èµ„æ–™æ—¶ï¼Œä½¿ç”¨youtube_downloaderå·¥å…·ä¸‹è½½ç›¸å…³å†…å®¹ã€‚"""
)
```

## å¹³å°æ”¯æŒ

### å½“å‰æ”¯æŒçš„å¹³å°

| å¹³å° | åŸŸå | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|------|
| YouTube | youtube.com, youtu.be | âœ… å®Œå…¨æ”¯æŒ | ä¸»è¦æµ‹è¯•å¹³å° |
| Bilibili | bilibili.com | âœ… å®Œå…¨æ”¯æŒ | ä¸­æ–‡å†…å®¹ä¸°å¯Œ |
| Vimeo | vimeo.com | âœ… å®Œå…¨æ”¯æŒ | é«˜è´¨é‡å†…å®¹ |
| Dailymotion | dailymotion.com | âœ… å®Œå…¨æ”¯æŒ | æ¬§æ´²å¹³å° |
| Twitch | twitch.tv | âœ… æ”¯æŒVOD | ç›´æ’­å½•åƒ |
| TikTok | tiktok.com | âœ… éƒ¨åˆ†æ”¯æŒ | çŸ­è§†é¢‘å¹³å° |

### å¹³å°ç‰¹æ€§è¯´æ˜

#### YouTube
- **ä¼˜åŠ¿**ï¼šå†…å®¹ä¸°å¯Œï¼ŒAPIç¨³å®šï¼Œè´¨é‡é€‰æ‹©å¤šæ ·
- **ç‰¹æ®ŠåŠŸèƒ½**ï¼šæ”¯æŒæ’­æ”¾åˆ—è¡¨ï¼Œå­—å¹•ä¸‹è½½
- **é™åˆ¶**ï¼šåœ°åŒºé™åˆ¶ï¼Œç‰ˆæƒä¿æŠ¤

#### Bilibili
- **ä¼˜åŠ¿**ï¼šä¸­æ–‡å­¦æœ¯å†…å®¹å¤šï¼ŒæŠ€æœ¯è®²åº§ä¸°å¯Œ
- **ç‰¹æ®ŠåŠŸèƒ½**ï¼šå¼¹å¹•æ•°æ®ï¼Œå¤šPè§†é¢‘
- **é™åˆ¶**ï¼šéƒ¨åˆ†å†…å®¹éœ€è¦ç™»å½•

#### Vimeo
- **ä¼˜åŠ¿**ï¼šé«˜è´¨é‡å†…å®¹ï¼Œä¸“ä¸šåˆ¶ä½œ
- **ç‰¹æ®ŠåŠŸèƒ½**ï¼šéšç§æ§åˆ¶ï¼ŒåµŒå…¥é€‰é¡¹
- **é™åˆ¶**ï¼šéƒ¨åˆ†å†…å®¹ä»˜è´¹

### æ‰©å±•æ–°å¹³å°

å¦‚æœéœ€è¦æ”¯æŒæ–°çš„è§†é¢‘å¹³å°ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–å‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼š

1. **æ£€æŸ¥yt-dlpæ”¯æŒ**ï¼šç¡®è®¤ç›®æ ‡å¹³å°åœ¨yt-dlpæ”¯æŒåˆ—è¡¨ä¸­
2. **æ›´æ–°å¹³å°åˆ—è¡¨**ï¼šåœ¨`_supported_platforms`ä¸­æ·»åŠ æ–°åŸŸå
3. **æµ‹è¯•åŠŸèƒ½**ï¼šéªŒè¯ä¸‹è½½å’Œè§£æåŠŸèƒ½æ­£å¸¸
4. **æ›´æ–°æ–‡æ¡£**ï¼šæ·»åŠ å¹³å°ç‰¹æ€§è¯´æ˜

## æ€§èƒ½ä¼˜åŒ–

### ä¸‹è½½æ€§èƒ½è°ƒä¼˜

```python
# è‡ªå®šä¹‰yt-dlpé€‰é¡¹ä»¥æé«˜æ€§èƒ½
def create_optimized_downloader(download_dir):
    downloader = create_youtube_downloader_tool(download_dir)
    
    # å¯ä»¥é€šè¿‡ä¿®æ”¹å†…éƒ¨é€‰é¡¹æ¥ä¼˜åŒ–æ€§èƒ½
    # æ³¨æ„ï¼šè¿™éœ€è¦å¯¹å·¥å…·å†…éƒ¨å®ç°çš„äº†è§£
    return downloader

# å¹¶å‘ä¸‹è½½ï¼ˆè°¨æ…ä½¿ç”¨ï¼Œé¿å…è¢«å¹³å°é™åˆ¶ï¼‰
import asyncio
from concurrent.futures import ThreadPoolExecutor

async def concurrent_download(video_list, max_workers=3):
    """å¹¶å‘ä¸‹è½½å¤šä¸ªè§†é¢‘ï¼ˆæ³¨æ„é€Ÿç‡é™åˆ¶ï¼‰"""
    
    def download_single(video):
        downloader = create_youtube_downloader_tool(f"./downloads/{video['category']}")
        return downloader.invoke(video)
    
    with ThreadPoolExecutor(max_workers=max_workers) as executor:
        loop = asyncio.get_event_loop()
        tasks = [
            loop.run_in_executor(executor, download_single, video) 
            for video in video_list
        ]
        return await asyncio.gather(*tasks)
```

### å­˜å‚¨ä¼˜åŒ–

```python
# å‹ç¼©ä¸‹è½½çš„è§†é¢‘ä»¥èŠ‚çœç©ºé—´
import subprocess

def compress_video(input_path, output_path, crf=28):
    """ä½¿ç”¨ffmpegå‹ç¼©è§†é¢‘"""
    
    cmd = [
        'ffmpeg', '-i', input_path,
        '-vcodec', 'libx264', '-crf', str(crf),
        '-preset', 'medium', '-acodec', 'aac',
        output_path
    ]
    
    subprocess.run(cmd, check=True)
```

## ç‰ˆæœ¬æ›´æ–°

### å½“å‰ç‰ˆæœ¬ï¼š1.0.0

#### æ–°å¢åŠŸèƒ½
- âœ… å¤šå¹³å°è§†é¢‘ä¸‹è½½æ”¯æŒ
- âœ… æ™ºèƒ½æ–‡ä»¶å‘½åå’Œæ¸…ç†
- âœ… å®Œæ•´çš„è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†
- âœ… LangChainå·¥å…·ç”Ÿæ€é›†æˆ
- âœ… éŸ³é¢‘æå–åŠŸèƒ½
- âœ… æ‰¹é‡ä¸‹è½½æ”¯æŒ

#### å·²çŸ¥é™åˆ¶
- ä¸æ”¯æŒéœ€è¦ç™»å½•çš„å¹³å°å†…å®¹
- ä¸æ”¯æŒç›´æ’­æµä¸‹è½½
- æŸäº›åœ°åŒºé™åˆ¶å†…å®¹å¯èƒ½æ— æ³•ä¸‹è½½

### è·¯çº¿å›¾

#### v1.1.0ï¼ˆè®¡åˆ’ä¸­ï¼‰
- [ ] å­—å¹•ä¸‹è½½å’Œå¤„ç†
- [ ] æ’­æ”¾åˆ—è¡¨æ‰¹é‡ä¸‹è½½
- [ ] ä¸‹è½½è¿›åº¦å›è°ƒå¢å¼º
- [ ] æ›´å¤šå¹³å°æ”¯æŒ

#### v1.2.0ï¼ˆè®¡åˆ’ä¸­ï¼‰
- [ ] è§†é¢‘å†…å®¹AIåˆ†æé›†æˆ
- [ ] è‡ªåŠ¨è½¬å½•åŠŸèƒ½
- [ ] æ™ºèƒ½åˆ†ç±»å’Œæ ‡è®°
- [ ] äº‘å­˜å‚¨é›†æˆ

## æŠ€æœ¯å®ç°ç»†èŠ‚

### æ¶æ„è®¾è®¡

```
YouTubeDownloaderTool
â”œâ”€â”€ è¾“å…¥éªŒè¯å±‚ (YouTubeDownloaderInput)
â”œâ”€â”€ å¹³å°æ£€æŸ¥å±‚ (_is_supported_platform)
â”œâ”€â”€ èµ„æºç®¡ç†å±‚ (_check_disk_space)
â”œâ”€â”€ ä¸‹è½½æ‰§è¡Œå±‚ (yt-dlp wrapper)
â”œâ”€â”€ æ–‡ä»¶ç®¡ç†å±‚ (_find_downloaded_files)
â””â”€â”€ é”™è¯¯å¤„ç†å±‚ (Exception handling)
```

### ä¾èµ–å…³ç³»

```
yt-dlp[default] >= 2024.12.0
â”œâ”€â”€ brotli              # å‹ç¼©æ”¯æŒ
â”œâ”€â”€ mutagen             # éŸ³é¢‘å…ƒæ•°æ®
â”œâ”€â”€ pycryptodomex       # åŠ å¯†æ”¯æŒ
â”œâ”€â”€ websockets          # æµåè®®æ”¯æŒ
â””â”€â”€ requests            # HTTPè¯·æ±‚
```

### å®‰å…¨è€ƒè™‘

1. **è¾“å…¥æ¸…ç†**ï¼šæ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½ç»è¿‡ä¸¥æ ¼éªŒè¯å’Œæ¸…ç†
2. **è·¯å¾„å®‰å…¨**ï¼šé˜²æ­¢è·¯å¾„éå†æ”»å‡»ï¼Œé™åˆ¶ä¸‹è½½ä½ç½®
3. **èµ„æºé™åˆ¶**ï¼šæ–‡ä»¶å¤§å°å’Œç£ç›˜ç©ºé—´æ£€æŸ¥ï¼Œé˜²æ­¢èµ„æºè€—å°½
4. **å¹³å°éªŒè¯**ï¼šä»…æ”¯æŒç™½åå•ä¸­çš„å¯ä¿¡å¹³å°
5. **é”™è¯¯éšè—**ï¼šä¸æš´éœ²å†…éƒ¨ç³»ç»Ÿä¿¡æ¯ç»™ç”¨æˆ·

## è´¡çŒ®æŒ‡å—

### å¦‚ä½•è´¡çŒ®

1. **æŠ¥å‘Šé—®é¢˜**ï¼šåœ¨GitHub Issuesä¸­æè¿°é‡åˆ°çš„é—®é¢˜
2. **å»ºè®®åŠŸèƒ½**ï¼šæäº¤åŠŸèƒ½è¯·æ±‚å’Œæ”¹è¿›å»ºè®®
3. **ä»£ç è´¡çŒ®**ï¼šForké¡¹ç›®ï¼Œåˆ›å»ºPull Request
4. **æ–‡æ¡£æ”¹è¿›**ï¼šå®Œå–„ä½¿ç”¨æŒ‡å—å’ŒAPIæ–‡æ¡£

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/homesystem.git
cd homesystem

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt
pip install -r requirements-dev.txt

# è¿è¡Œæµ‹è¯•
python -m pytest tests/test_youtube_downloader.py

# è¿è¡Œç¤ºä¾‹
python examples/youtube_downloader_example.py
```

---

## ğŸ“ æ”¯æŒä¸åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- **GitHub Issues**: [é¡¹ç›®é—®é¢˜è·Ÿè¸ª](https://github.com/your-org/homesystem/issues)
- **æ–‡æ¡£**: æŸ¥çœ‹å®Œæ•´çš„[é¡¹ç›®æ–‡æ¡£](../README.md)
- **ç¤ºä¾‹**: å‚è€ƒ[ä½¿ç”¨ç¤ºä¾‹](../examples/youtube_downloader_example.py)

---

*æœ€åæ›´æ–°ï¼š2024å¹´12æœˆ*