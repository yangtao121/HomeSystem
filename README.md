# HomeSystem

åŸºäºŽ Docker çš„æ¨¡å—åŒ–æ™ºèƒ½å®¶åº­è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œé›†æˆæœ¬åœ°å’Œäº‘ç«¯å¤§æ¨¡åž‹ï¼Œæä¾›æ–‡æ¡£ç®¡ç†ã€è®ºæ–‡æ”¶é›†å’Œå·¥ä½œæµè‡ªåŠ¨åŒ–åŠŸèƒ½ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- ðŸ³ **æ¨¡å—åŒ–éƒ¨ç½²**: ä¸‰å¤§ç‹¬ç«‹æ¨¡å—ï¼Œæ”¯æŒåˆ†å¸ƒå¼è·¨æœºå™¨éƒ¨ç½²
- ðŸ“š **æ™ºèƒ½è®ºæ–‡åˆ†æž**: åŸºäºŽArXivçš„è‡ªåŠ¨è®ºæ–‡æ”¶é›†ã€åˆ†æžå’Œç®¡ç†
- ðŸ” **é«˜çº§OCRå¤„ç†**: è¿œç¨‹GPUåŠ é€Ÿçš„PaddleOCRæ–‡æ¡£è¯†åˆ«æœåŠ¡
- ðŸ—„ï¸ **ä¼ä¸šçº§æ•°æ®åº“**: PostgreSQL + Redis åŒæ•°æ®åº“æž¶æž„
- ðŸŒ **å¤šLLMæ”¯æŒ**: DeepSeek V3ã€Qwenã€Doubaoç­‰å¤šç§å¤§æ¨¡åž‹
- ðŸ“Š **å¯è§†åŒ–åˆ†æž**: è®ºæ–‡æ•°æ®çš„æ™ºèƒ½ç»Ÿè®¡å’Œè¶‹åŠ¿åˆ†æž
- ðŸ”„ **å·¥ä½œæµè‡ªåŠ¨åŒ–**: å®šæ—¶ä»»åŠ¡è°ƒåº¦å’Œæ‰¹å¤„ç†åŠŸèƒ½

## ðŸ—ï¸ ç³»ç»Ÿæž¶æž„

HomeSystem é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œç”±ä¸‰ä¸ªç‹¬ç«‹çš„ Docker æœåŠ¡ç»„æˆï¼Œå¯åœ¨ä¸åŒæœºå™¨ä¸Šéƒ¨ç½²ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     æ•°æ®åº“æœåŠ¡        â”‚    â”‚    è¿œç¨‹OCRæœåŠ¡       â”‚    â”‚   PaperAnalysis    â”‚
â”‚  (Database Module)  â”‚    â”‚ (Remote OCR Module) â”‚    â”‚   (Web Module)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ PostgreSQL:15432  â”‚    â”‚ â€¢ OCR Service:5001  â”‚    â”‚ â€¢ Web App:5002     â”‚
â”‚ â€¢ Redis:16379       â”‚â—„â”€â”€â”€â”¼â”€â€¢ GPUåŠ é€Ÿå¤„ç†        â”‚â—„â”€â”€â”€â”¼â”€â€¢ è®ºæ–‡ç®¡ç†ç•Œé¢      â”‚
â”‚ â€¢ pgAdmin:8080      â”‚    â”‚ â€¢ PaddleOCRå¼•æ“Ž     â”‚    â”‚ â€¢ APIæŽ¥å£          â”‚
â”‚ â€¢ Redis Web:8081    â”‚    â”‚ â€¢ æ‰¹é‡æ–‡æ¡£å¤„ç†       â”‚    â”‚ â€¢ ä»»åŠ¡è°ƒåº¦          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                           â”‚                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                            ç½‘ç»œè¿žæŽ¥æ”¯æŒ
                          è·¨ä¸»æœºLANéƒ¨ç½²
```

## ðŸ”Œ é»˜è®¤ç«¯å£é…ç½®

| æœåŠ¡ | ä¸»æœºç«¯å£ | è¯´æ˜Ž |
|------|---------|------|
| PostgreSQL | 15432 | ä¸»æ•°æ®åº“ |
| Redis | 16379 | ç¼“å­˜æ•°æ®åº“ |
| pgAdmin | 8080 | æ•°æ®åº“ç®¡ç†ç•Œé¢ (å¯é€‰) |
| Redis Commander | 8081 | Redisç®¡ç†ç•Œé¢ (å¯é€‰) |
| OCR Service | 5001 | OCRå¤„ç†API |
| PaperAnalysis | 5002 | Webåº”ç”¨ç¨‹åº |

## ðŸš€ å¿«é€Ÿéƒ¨ç½²

### å‰ç½®è¦æ±‚

- Docker 20.10+ å’Œ Docker Compose 2.0+
- æ£€æŸ¥ç«¯å£æ˜¯å¦å¯ç”¨ï¼š
  ```bash
  ./check-ports.sh  # æ£€æŸ¥æ ¸å¿ƒç«¯å£
  ```

### ç¬¬ä¸€æ­¥ï¼šå…¨å±€é…ç½®

**âš ï¸ é‡è¦ï¼šæ‰€æœ‰æ¨¡å—éƒ¨ç½²å‰å¿…é¡»å…ˆé…ç½®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶**

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºå…¨å±€é…ç½®æ–‡ä»¶
cd /path/to/homesystem
cp .env.example .env
vim .env
```

**æœ€å°å¿…éœ€é…ç½®ï¼š**
```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost          # è·¨ä¸»æœºéƒ¨ç½²æ—¶ä¿®æ”¹ä¸ºæ•°æ®åº“ä¸»æœºIP
DB_PORT=15432
DB_NAME=homesystem
DB_USER=homesystem
DB_PASSWORD=your_secure_db_password_here

# Redisé…ç½®
REDIS_HOST=localhost       # è·¨ä¸»æœºéƒ¨ç½²æ—¶ä¿®æ”¹ä¸ºRedisä¸»æœºIP
REDIS_PORT=16379

# LLM APIé…ç½®ï¼ˆè‡³å°‘é…ç½®ä¸€ä¸ªï¼‰
DEEPSEEK_API_KEY=sk-your_deepseek_api_key_here
DEEPSEEK_BASE_URL=https://api.deepseek.com

# OCRæœåŠ¡é…ç½®
REMOTE_OCR_ENDPOINT=http://localhost:5001  # è·¨ä¸»æœºéƒ¨ç½²æ—¶ä¿®æ”¹ä¸ºOCRä¸»æœºIP
```

### ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²æ•°æ®åº“æœåŠ¡

```bash
cd database/

# å¯åŠ¨æ•°æ®åº“æœåŠ¡
./start.sh

# éªŒè¯æœåŠ¡è¿è¡ŒçŠ¶æ€
docker compose ps
./check-tables.sh
```

**è®¿é—®åœ°å€ï¼š**
- PostgreSQL: `localhost:15432`
- Redis: `localhost:16379`
- pgAdmin (å¯é€‰): `http://localhost:8080` (admin@homesystem.local / admin123)

### ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²OCRæœåŠ¡

```bash
cd remote_app/

# æž„å»ºå¹¶å¯åŠ¨OCRæœåŠ¡
./deploy.sh --build

# æ£€æŸ¥GPUæ”¯æŒï¼ˆå¦‚æžœæœ‰GPUï¼‰
docker compose logs ocr-service
```

**è®¿é—®åœ°å€ï¼š**
- OCR API: `http://localhost:5001`
- å¥åº·æ£€æŸ¥: `http://localhost:5001/api/health`

### ç¬¬å››æ­¥ï¼šéƒ¨ç½²Webåº”ç”¨

```bash
cd Web/PaperAnalysis/

# ç¡®ä¿å…¨å±€é…ç½®æ–‡ä»¶å­˜åœ¨
ls -la ../../.env

# éƒ¨ç½²WebæœåŠ¡
./deploy.sh --build

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker compose ps
```

**è®¿é—®åœ°å€ï¼š**
- Webç•Œé¢: `http://localhost:5002`
- APIæŽ¥å£: `http://localhost:5002/api/`

## ðŸŒ è·¨ä¸»æœºéƒ¨ç½²

### ç½‘ç»œæ‹“æ‰‘

```
ä¸»æœºA (æ•°æ®åº“)          ä¸»æœºB (OCR)           ä¸»æœºC (Web)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL:15432â”‚â—„â”€â”€â”€â”¼â”€OCR Service:5001â”‚â—„â”€â”€â”€â”¼â”€PaperAnalysis   â”‚
â”‚ Redis:16379     â”‚    â”‚                 â”‚    â”‚ :5002           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   192.168.1.100        192.168.1.101         192.168.1.102
```

### é…ç½®ç¤ºä¾‹

**ä¸»æœºA (æ•°æ®åº“)ï¼š**
```bash
cd database/
./start.sh
```

**ä¸»æœºB (OCR)ï¼š**
```bash
cd remote_app/
./deploy.sh --build
```

**ä¸»æœºC (Web)ï¼š**
```bash
# ä¿®æ”¹æ ¹ç›®å½•é…ç½®æŒ‡å‘è¿œç¨‹æœåŠ¡
cd /path/to/homesystem
cat > .env << EOF
DB_HOST=192.168.1.100
DB_PORT=15432
REDIS_HOST=192.168.1.100
REDIS_PORT=16379
REMOTE_OCR_ENDPOINT=http://192.168.1.101:5001
DEEPSEEK_API_KEY=your_api_key_here
EOF

cd Web/PaperAnalysis/
./deploy.sh --build
```

## ðŸ”§ è‡ªå®šä¹‰ç«¯å£é…ç½®

å¦‚æžœé»˜è®¤ç«¯å£è¢«å ç”¨ï¼Œå¯é€šè¿‡çŽ¯å¢ƒå˜é‡ä¿®æ”¹ï¼š

```bash
# æ•°æ®åº“æ¨¡å—
cd database/
cat > .env << EOF
DB_PORT=25432
REDIS_PORT=26379
EOF

# OCRæ¨¡å—
cd remote_app/
cat > .env << EOF
OCR_SERVICE_PORT=8080
EOF

# Webæ¨¡å—
cd Web/PaperAnalysis/
cat > .env << EOF
FLASK_PORT=8002
EOF
```


## åŠŸèƒ½ä»‹ç»

### PaperAnlysis



## ðŸ”— ç›¸å…³æ–‡æ¡£

- **å¸¸è§é—®é¢˜è§£å†³**: [FAQ.md](FAQ.md) - ç«¯å£å†²çªã€è¿žæŽ¥å¤±è´¥ã€æœåŠ¡éªŒè¯ç­‰é—®é¢˜è§£å†³æ–¹æ¡ˆ
- **æ•°æ®åº“éƒ¨ç½²**: `database/README.md` - å®Œæ•´çš„æ•°æ®åº“éƒ¨ç½²æŒ‡å—
- **OCRæœåŠ¡**: `remote_app/README.md` - OCRæœåŠ¡é…ç½®å’Œä½¿ç”¨
- **Webåº”ç”¨**: `Web/PaperAnalysis/README.md` - PaperAnalysisè¯¦ç»†åŠŸèƒ½
- **å¼€å‘æŒ‡å—**: `docs/` - å„ç»„ä»¶å¼€å‘æ–‡æ¡£


